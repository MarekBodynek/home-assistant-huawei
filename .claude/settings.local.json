{
  "env": {
    "HA_URL": "https://ha.bodino.us.kg",
    "HA_TOKEN": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJkNjRkYzVmY2FjYWY0MWQ0OGI5M2EyYjNiZTU4ZGRmMyIsImlhdCI6MTc2MzUwMDcyOCwiZXhwIjoyMDc4ODYwNzI4fQ.4GyI_6NVc477NLWVWjKEDb16faG5bTVyo3FgcN9Aspc",
    "HA_SSH_HOST": "192.168.0.106",
    "HA_SSH_USER": "marekbodynek"
  },
  "permissions": {
    "allow": [
      "Bash(do sleep 3)",
      "Bash(curl:*)",
      "Bash(python3:*)",
      "Bash(ssh:*)",
      "Bash(for sensor in \"sensor.time\" \"sensor.strefa_taryfowa\" \"sensor.akumulatory_stan_pojemnosci\" \"input_number.battery_target_soc\" \"sensor.prognoza_pv_dzisiaj\" \"binary_sensor.dzien_roboczy\")",
      "Bash(do echo -n \"$sensor: \")",
      "Bash(done)",
      "Bash(git push)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nðŸ“Š Dokumentacja: PeÅ‚ne drzewo decyzyjne algorytmu (Mermaid)\n\nDODANO:\n- docs/decision_tree.md - wizualizacja Mermaid caÅ‚ego algorytmu\n- Kompletny diagram przepÅ‚ywu decyzji\n- Priorytety, progi, okna czasowe\n- Tryby pracy i ich mapowanie\n\nSTRUKTURA DRZEWA:\n1. BezpieczeÅ„stwo (temperatura, SOC <5%)\n2. L2 Å‚adowanie (NOC 22-06h, POÅUDNIE 13-15h)\n3. Autoconsumption (surplus/deficit)\n4. Sezon grzewczy (PC CO logika)\n\nKLUCZOWE DECYZJE:\n- SOC <5%: KRYTYCZNE - Å‚aduj 24/7\n- SOC <20%: PILNE - Å‚aduj w L2\n- SOC â‰¤20% w L1: CZEKAJ na L2 (FIX!)\n- L2 13-15h: PV > sieÄ‡ (inteligentne)\n\nPOMAGA:\nâœ… ZrozumieÄ‡ caÅ‚Ä… logikÄ™ algorytmu\nâœ… ZnaleÅºÄ‡ bÅ‚Ä™dy i konflikty\nâœ… PlanowaÄ‡ nowe funkcje\nâœ… Onboarding nowych osÃ³b\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git fetch:*)",
      "Bash(git checkout:*)",
      "Bash(git restore:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nðŸŒ¡ï¸ FIX KRYTYCZNY: Prawdziwa temperatura baterii z Huawei Solar\n\nPROBLEM:\n- sensor.bateria_temperatura_maksymalna uÅ¼ywaÅ‚ JV* (optymalizatory PV na dachu)\n- PokazywaÅ‚ 7.8Â°C (temperatura dachu) zamiast 31.6Â°C (bateria w garaÅ¼u)\n- binary_sensor.bateria_bezpieczna_temperatura = OFF (<5Â°C)\n- BlokowaÅ‚ Å‚adowanie pomimo prawidÅ‚owej temperatury baterii!\n\nROZWIÄ„ZANIE:\nâœ… sensor.bateria_temperatura_maksymalna â†’ sensor.akumulator_1_temperatura\nâœ… UÅ¼ywa prawdziwej temp. baterii z integracji Huawei Solar (~31Â°C)\nâœ… Dodano oddzielny sensor dla PV optimizers (referencyjnie)\nâœ… Nie trzeba custom FusionSolar API - sensor juÅ¼ istniaÅ‚!\n\nKORZYÅšCI:\n- Temperatura safety checks dziaÅ‚ajÄ… poprawnie\n- Åadowanie nie jest blokowane niepotrzebnie\n- Gotowe do implementacji three-tier temperature protection\n- Wszystkie alarmy temp. dziaÅ‚ajÄ… z prawdziwymi danymi\n\nÅ¹RÃ“DÅO:\n- sensor.akumulator_1_temperatura (Huawei Solar integration)\n- Poprzednio uÅ¼ywany w automations_battery.yaml, ale nie w algorytmie\n\nVERSION: 3.3\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(ping:*)",
      "Bash(for:*)",
      "Bash(do)",
      "Bash(if ping -c 1 -W 2 192.168.7.25)",
      "Bash(/dev/null)",
      "Bash(then)",
      "Bash(break)",
      "Bash(else)",
      "Bash([ $i -lt 10 ])",
      "Bash(fi)",
      "Bash(git commit -m \"$(cat <<''EOF''\nðŸ”§ FIX: Poprawna nazwa sensora temperatury baterii\n\nPROBLEM:\n- UÅ¼yto nieistniejÄ…cego sensora sensor.akumulator_1_temperatura\n- Wszystkie sensory temp. pokazywaÅ‚y \"unknown\"\n\nROZWIÄ„ZANIE:\nâœ… sensor.akumulator_1_bms_temperature - poprawna nazwa\nâœ… To jest \"Internal temperature\" (34.5Â°C) z FusionSolar\nâœ… Sensor jest disabled by integration - trzeba wÅ‚Ä…czyÄ‡ w UI\n\nINSTRUKCJA WÅÄ„CZENIA:\nSettings â†’ Devices & Services â†’ Huawei Solar â†’ \nAkumulator 1 â†’ Entities â†’ Enable \"BMS temperature\"\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit -m \"$(cat <<''EOF''\nðŸ”‹ FIX: Automatyczne wybudzanie baterii z Sleep mode o 22:00\n\nPROBLEM:\n- Bateria w Sleep mode (SOC=20%) nie reaguje na TOU\n- O 22:00 powinna Å‚adowaÄ‡ ale moc = 0W\n\nROZWIÄ„ZANIE:\nâœ… Nowa automatyzacja: battery_wake_from_sleep_l2_start\nâœ… Trigger o 22:00:30 (30s po starcie L2)\nâœ… Warunki: Sleep mode + SOC < Target SOC\nâœ… Akcja: forcible_charge 5kW/30min â†’ wybudzi bateriÄ™\nâœ… Po 30s uruchamia battery_algorithm Å¼eby przejÄ…Ä‡ kontrolÄ™\n\nKORZYÅšÄ†:\n- Bateria zawsze zacznie Å‚adowaÄ‡ o 22:00\n- Nie zostanie w Sleep mode przez caÅ‚Ä… noc\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")"
    ],
    "deny": [],
    "ask": []
  }
}
