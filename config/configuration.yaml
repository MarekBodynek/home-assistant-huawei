# Home Assistant - Konfiguracja dla Huawei Solar
# Dokumentacja: https://www.home-assistant.io/docs/configuration/

# Podstawowa konfiguracja
homeassistant:
  name: Dom
  latitude: 52.2297
  longitude: 21.0122
  elevation: 100
  unit_system: metric
  time_zone: Europe/Warsaw
  currency: PLN
  external_url: https://ha.bodino.us.kg
  internal_url: http://192.168.0.106:8123

# Frontend
frontend:
  themes: !include_dir_merge_named themes

# Dashboardy
lovelace:
  mode: storage
  dashboards:
    lovelace-huawei:
      mode: yaml
      title: Huawei Solar PV
      icon: mdi:solar-power
      show_in_sidebar: true
      filename: lovelace_huawei.yaml
  resources:
    - url: /local/community/apexcharts-card/apexcharts-card.js
      type: module

# Logowanie
logger:
  default: info
  logs:
    huawei_solar: debug

# Historia
history:

# Logbook
logbook:

# Rekorder - przechowywanie danych
recorder:
  purge_keep_days: 30
  db_url: sqlite:////config/home-assistant_v2.db

# Energia
energy:

# Template sensors
template: !include template_sensors.yaml

# Input numbers
input_number: !include input_numbers.yaml

# Python Scripts
python_script:

# Automatyzacje
automation manual: !include automations.yaml
automation battery: !include automations_battery.yaml

# Skrypty
script: !include scripts.yaml

# Sceny
scene: !include scenes.yaml

# Shell commands
shell_command:
  git_pull: 'cd /config && git pull'

# HTTP
http:
  use_x_forwarded_for: true
  trusted_proxies:
    - 127.0.0.1
    - ::1
    - 172.30.33.0/24  # Cloudflare Tunnel addon
    - 172.17.0.0/16   # Docker network
    - 173.245.48.0/20
    - 103.21.244.0/22
    - 103.22.200.0/22
    - 103.31.4.0/22
    - 141.101.64.0/18
    - 108.162.192.0/18
    - 190.93.240.0/20
    - 188.114.96.0/20
    - 197.234.240.0/22
    - 198.41.128.0/17
    - 162.158.0.0/15
    - 104.16.0.0/13
    - 104.24.0.0/14
    - 172.64.0.0/13
    - 131.0.72.0/22
